@model LoginModel

@{
    ViewData["Title"] = "Login";
}

<div class="row justify-content-center">
    <div class="col-md-6">
        <h2>Login</h2>
        <form method="POST">
            <div class="mb-3">
                <label for="inputEmail" class="form-label">Email address</label>
                <input type="email" class="form-control" id="inputEmail" placeholder="Email"/>
            </div>
            <div class="mb-3">
                <label for="inputPassword" class="form-label">Password</label>
                <input type="password" class="form-control" id="inputPassword" placeholder="Password"/>
            </div>

            <button type="button" class="btn btn-primary" onclick="Login()" id="loginBtn">Login</button>
        </form>
    </div>
</div>

@section Scripts {

    <script>
        
        function Login () {
            var user = {
                c_email: $('#inputEmail').val(),
                c_password: $('#inputPassword').val()
            }
            settings = {
                "url": "https://localhost:7051/api/UserApi/Login",
                "method": "POST",
                "timeout": 0,
                "headers": {
                    "Content-Type": "application/json"
                },
                "data": JSON.stringify(user)
            }


            console.log(user);
            $.ajax(settings).done(function (response)
            {
                alert('Successfully Logged In!');
                localStorage.setItem('token', response);
                window.location = "/StudentAjax/Index";
            }).fail(function (response)
            {
                console.log(response);
                alert(response.responseText);
                window.location = "/UserMVCApi/Login";
            });
        }
    
    </script>
}

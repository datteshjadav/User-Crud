@model Register

@{
    ViewData["Title"] = "Register";
}

<div class="row justify-content-center">
    <div class="col-md-6">
        <h2>Register</h2>
        <form method="POST"  enctype="multipart/form-data">
            <div class="mb-3">
                <label for="inputUsername" class="form-label">Username: </label>
                <input type="text" class="form-control" id="username" placeholder="Username" asp-for="c_username">
    
            </div>

            <div class="mb-3">
                <label for="inputEmail" class="form-label">Email address: </label>
                <input type="email" class="form-control" id="email" placeholder="Email">
                <span class="text-danger">@Html.ValidationMessageFor(Register => Register.c_email)</span>
            </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Password: </label>
                <input type="password" class="form-control" id="password" placeholder="Password">
                <span class="text-danger">@Html.ValidationMessageFor(Register => Register.c_password)</span>
            </div>

            <div class="mb-3">
                <label for="inputConfirmPassword" class="form-label">Confirm Password: </label>
                <input type="password" class="form-control" id="inputConfirmPassword" placeholder="Confirm Password"
                    asp-for="c_confirmpassword">
                <span class="text-danger">@Html.ValidationMessageFor(Register => Register.c_confirmpassword)</span>
            </div>

            <div class="mb-3">
                <div class="mb-3">
                        <label>RadioBtn: </label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rdbtn" id="Male" value="btn1">
                            <label class="form-check-label" for="btn1">
                                btn1
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rdbtn" id="Female" value="btn2">
                            <label class="form-check-label" for="btn2">
                                btn2
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="rdbtn" id="Others" value="btn3">
                            <label class="form-check-label" for="btn3">
                                btn3
                            </label>
                        </div>
                        <span class="text-danger" id="StudGenderHelp"></span>
                    </div> 
            </div>
            
            <div class="mb-3">
                        <label>CheckBox: </label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="chkbox" value="ChkBox1"
                                id="ChkBox1">
                            <label class="form-check-label" for="ChkBox1">
                                ChkBox1
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="chkbox" value="ChkBox2"
                                id="ChkBox2">
                            <label class="form-check-label" for="ChkBox2">
                                ChkBox2
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="chkbox" value="ChkBox3"
                                id="ChkBox3">
                            <label class="form-check-label" for="ChkBox3">
                                ChkBox3
                            </label>
                        </div>
                        <span class="text-danger" id="StudLanguageHelp"></span>
                    </div>

            <div class="mb-3">
                <label for="inputImage" class="form-label">Image: </label>
                <input type="file" class="form-control" id="userimg">
                <span class="text-danger">@Html.ValidationMessageFor(Register => Register.c_image)</span>
            </div>
            
            @* <button type="submit" class="btn btn-primary">Register</button> *@
             <input type="submit" value="Register" class="btn btn-primary" id="btnRegister" onclick="Register()" />
        </form>
    </div>
</div>

@section Scripts
{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}


<script>
    function Register() {
        var formData = new FormData();
        formData.append('c_username', $('#username').val());
        formData.append('c_email', $('#email').val());
        formData.append('c_password', $('#password').val());
        formData.append('c_gender', $('input[name="rdbtn"]:checked').val());
        $('input[name="chkbox"]:checked').each(function(){
            formData.append('c_chkbox[]', $(this).val());
        });
        formData.append('Image', $('#userimg')[0].files[0]);
    
        $.ajax({
            url: 'https://localhost:7051/api/UserApi/Register',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false, // This is required for sending files
            success: function (data) {
                successMsg(data.message);
            }
        });
    }
</script>